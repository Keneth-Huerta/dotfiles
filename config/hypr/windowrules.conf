# #######################################################################################
# WINDOW RULES CONFIGURATION
# Rules for specific applications and window behaviors
# #######################################################################################

##############################
### WINDOWS AND WORKSPACES ###
##############################

# Application-specific window rules
windowrule = float on, match:class ^(com.github.hluk.copyq)$
windowrule = size 600 400, match:class ^(com.github.hluk.copyq)$
windowrule = center on, match:class ^(com.github.hluk.copyq)$

# Bitwarden extension and authentication windows
windowrule = float on, match:title ^(.*Bitwarden.*)$
windowrule = float on, match:title ^(.*bitwarden.*)$
windowrule = size 400 600, match:title ^(.*Bitwarden.*)$
windowrule = center on, match:title ^(.*Bitwarden.*)$
windowrule = stay_focused on, match:title ^(.*Bitwarden.*)$
windowrule = pin on, match:title ^(.*Bitwarden.*)$

# Google authentication and security popups
windowrule = float on, match:title ^(.*Sign in.* Google.*)$
windowrule = float on, match:title ^(.*Google.*Account.*)$
windowrule = float on, match:title ^(.*Iniciar sesi√≥n.* Google.*)$
windowrule = float on, match:title ^(.*Cuenta de Google.*)$
windowrule = float on, match:title ^(.*Google.*Security.*)$
windowrule = float on, match:title ^(.*Choose an account.*)$
windowrule = float on, match:title ^(.*Elige una cuenta.*)$
windowrule = size 500 700, match:title ^(.*Sign in.* Google.*)$
windowrule = center on, match:title ^(.*Sign in.* Google.*)$
windowrule = stay_focused on, match:title ^(.*Sign in.* Google.*)$
windowrule = pin on, match:title ^(.*Sign in.* Google.*)$

# Browser extension popups (general)
windowrule = float on, match:title ^(Extension:.*)$
windowrule = float on, match:class ^(.*)$, match:title ^(.*extension.*)$
windowrule = stay_focused on, match:title ^(Extension:.*)$
windowrule = pin on, match:title ^(Extension:.*)$

# Ignore maximize requests from apps (but not for auth windows)
windowrule = suppress_event maximize, match:class ^(.*)$

# Fix some dragging issues with XWayland
windowrule = no_focus on, match:class ^$, match:title ^$, match:xwayland 1, match:float 1

######################
### FLOATING WINDOWS ###
######################

# System utilities
windowrule = float on, match:class ^(pavucontrol)$
windowrule = float on, match:class ^(blueman-manager)$
windowrule = float on, match:class ^(nm-applet)$
windowrule = float on, match:class ^(nm-connection-editor)$
windowrule = float on, match:class ^(file-roller)$
windowrule = float on, match:class ^(qalculate-gtk)$
windowrule = float on, match:class ^(gnome-calculator)$
windowrule = size 400 500, match:class ^(pavucontrol)$
windowrule = size 500 600, match:class ^(blueman-manager)$

# File managers floating dialogs
windowrule = float on, match:title ^(Open File)$
windowrule = float on, match:title ^(Save File)$
windowrule = float on, match:title ^(Open Folder)$
windowrule = float on, match:title ^(Abrir archivo)$
windowrule = float on, match:title ^(Guardar archivo)$
windowrule = float on, match:title ^(Abrir carpeta)$
windowrule = size 900 600, match:title ^(Open File)$

# Picture-in-Picture
windowrule = float on, match:title ^(Picture-in-Picture)$
windowrule = pin on, match:title ^(Picture-in-Picture)$
windowrule = size 640 360, match:title ^(Picture-in-Picture)$
windowrule = move (100%-660) (100%-400), match:title ^(Picture-in-Picture)$
windowrule = keep_aspect_ratio on, match:title ^(Picture-in-Picture)$

##########################
### WORKSPACE ASSIGNMENTS ###
##########################

# Browser
windowrule = workspace 2, match:class ^(firefox)$
windowrule = workspace 2, match:class ^(zen-alpha)$
windowrule = workspace 2, match:class ^(chromium)$
windowrule = workspace 2, match:class ^(Google-chrome)$

# Communication
windowrule = workspace 3, match:class ^(discord)$
windowrule = workspace 3, match:class ^(Slack)$
windowrule = workspace 3, match:class ^(telegram-desktop)$
windowrule = workspace 3, match:class ^(Signal)$

# Media
windowrule = workspace 4, match:class ^(spotify)$
windowrule = workspace 4, match:class ^(YouTube Music)$
windowrule = workspace 4, match:title ^(YouTube Music)$
windowrule = workspace 4, match:class ^(mpv)$
windowrule = workspace 4, match:class ^(vlc)$

# Development
windowrule = workspace 5, match:class ^(code)$, match:float 0
windowrule = workspace 5, match:class ^(Code)$, match:float 0
windowrule = workspace 5, match:class ^(jetbrains-.*)$, match:float 0

# Gaming
windowrule = workspace 6, match:class ^(steam)$
windowrule = workspace 6, match:class ^(lutris)$
windowrule = workspace 6, match:class ^(heroic)$
windowrule = workspace 6, match:title ^(Steam)$

# Graphics
windowrule = workspace 7, match:class ^(gimp)$
windowrule = workspace 7, match:class ^(inkscape)$
windowrule = workspace 7, match:class ^(krita)$
windowrule = workspace 7, match:class ^(blender)$

# Office
windowrule = workspace 8, match:class ^(libreoffice.*)$
windowrule = workspace 8, match:class ^(Joplin)$
windowrule = workspace 8, match:class ^(obsidian)$

#######################
### OPACITY RULES ###
#######################

# Terminal transparency
windowrule = opacity 0.95 0.85, match:class ^(kitty)$
windowrule = opacity 0.95 0.85, match:class ^(Alacritty)$
windowrule = opacity 0.95 0.85, match:class ^(wezterm)$

# Code editors slight transparency
windowrule = opacity 0.97 0.92, match:class ^(code)$
windowrule = opacity 0.97 0.92, match:class ^(Code)$

# File managers
windowrule = opacity 0.96 0.90, match:class ^(nautilus)$
windowrule = opacity 0.96 0.90, match:class ^(thunar)$

###################
### GAMING RULES ###
###################

# Disable blur and effects for games
windowrule = no_blur on, match:class ^(steam_app_.*)$
windowrule = no_shadow on, match:class ^(steam_app_.*)$
windowrule = border_size 0, match:fullscreen 1, match:class ^(steam_app_.*)$
windowrule = fullscreen on, match:class ^(steam_app_.*)$

# Wine/Proton games
windowrule = no_blur on, match:class ^(.*\.exe)$
windowrule = no_shadow on, match:class ^(.*\.exe)$

# Gaming launchers optimizations
windowrule = opacity 0.98 0.95, match:class ^(steam)$, match:title ^((?!notificationtoasts).*)$
windowrule = float on, match:class ^(steam)$, match:title ^(Friends List)$
windowrule = float on, match:class ^(steam)$, match:title ^(Steam Settings)$

############################
### SPECIAL WINDOW TYPES ###
############################

# Tooltips and popups (but not auth windows)
windowrule = float on, match:class ^$, match:title ^$
windowrule = border_size 0, match:class ^$, match:title ^$
windowrule = no_anim on, match:class ^$, match:title ^$

# Notifications (but not auth windows)
windowrule = float on, match:class ^(.*notification.*)$
windowrule = float on, match:title ^(.*notification.*)$
windowrule = border_size 0, match:class ^(.*notification.*)$
# Removed nofocus for notifications to allow auth popups to get focus

# Screenshots and screen capture
windowrule = float on, match:class ^(flameshot)$
windowrule = no_anim on, match:class ^(flameshot)$
windowrule = border_size 0, match:class ^(flameshot)$
windowrule = float on, match:title ^(.*Sharing Indicator)$
windowrule = move (100%-400) 0, match:title ^(.*Sharing Indicator)$

# Virtual machines
windowrule = float on, match:class ^(virt-manager)$
windowrule = size 1200 800, match:class ^(virt-manager)$
windowrule = fullscreen on, match:class ^(.*VirtualBox.*)$, match:title ^(.*running)$

####################
### TILING RULES ###
####################

# Force tiling for certain apps
windowrule = tile on, match:class ^(Spotify)$
windowrule = tile on, match:class ^(discord)$

# Center specific windows
windowrule = center on, match:class ^(pavucontrol)$
windowrule = center on, match:class ^(blueman-manager)$
windowrule = center on, match:class ^(qalculate-gtk)$

######################
### ANIMATION RULES ###
######################

# Disable animations for some windows
windowrule = no_anim on, match:class ^(wofi)$
windowrule = no_anim on, match:class ^(rofi)$
windowrule = no_anim on, match:title ^(.*)(slurp)(.*)$

# Special animations for specific apps
windowrule = animation popin 90%, match:class ^(kitty)$
windowrule = animation slide, match:class ^(wofi)$
